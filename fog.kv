#:import StartGameButton widgets.StartGameButton
#:import ContinueGameButton widgets.ContinueGameButton


<BaseButtonLayout>:
    orientation: "vertical"
    spacing: "10dp"  # space between widgets
    padding: "0dp", "0dp","0dp","55dp"

<BaseButton>:
    adapt_to_text_height: True
    font_name: "CreteRound"
    font_size: "20sp"
    padding: "25dp", "17dp", "25dp", "17dp"
    background_color: 1, 1, 1, 0.4
    size_hint: 1, None
    height: self.texture_size[1] if self.adapt_to_text_height else self.height
    text_size: self.width, None  # needed to align the text in Buttons. No y_hint to make it adapt to te text
    valign: "middle"
    halign: "left"

<RootLayout>
    orientation: "vertical"

<TitleLayout>:
    orientation: "vertical"
    padding: "0dp", "70dp","0dp","0dp"

<StartMenuButtonLayout>:
    padding: "0dp", "150dp","0dp","0dp"

<TitleLabel>:  # displays the title of the game
    font_name: "Chiller"
    halign: "center"
    font_size: "150sp"
    opacity: 0.0  # starts invisible and fades in
    text: app.title

<InterfaceLayout>
    size_hint_y: 0.1
    ToggleButton:
        text: "music button"

<ScreenLayout>:  # main layout of the screen. Contains TextLayout and ButtonLayout and it is embedded in the ScrollView
    orientation: "vertical"
    size_hint: 1, None
    height: self.minimum_height

<GameTextImageLayout>:  # layout for organizing text and images (GameTextLabel and ImageLayout)
    orientation: "vertical"
    padding: "25dp", "50dp","25dp","40dp"
    size_hint: 1, None
    height: self.minimum_height

<GameButtonLayout>:  # layout for organizing in-game buttons (GameButton)
    size_hint: 1, None
    height: self.minimum_height

<ImageLayout>:  # layout for organizing individual in-game pictures
    padding: "0dp", "0dp","0dp","25dp"
    size_hint: 1, None
    height: self.minimum_height

<GameTextLabel>:  # displays in-game text
    font_name: "Vollkorn"
    font_size: "21sp"
    markup: True
    size_hint: 1, None
    text_size: self.width, None
    height: self.texture_size[1]

<GameImage>:  # displays in-game pictures
    halign: "center"
    size_hint: 1, None
    size: self.texture_size

<MenuButton>:
    adapt_to_text_height: False  # allows overwriting height: self.texture_size[1] of BaseButton
    font_size: "27sp"
    size_hint_y: None
    halign: "center"
    height: "80dp"

<StartMenuButton>:
    adapt_to_text_height: True
    font_size: "20sp"

<StartMenuLayout>:
    padding: "0dp", "0dp","0dp","5dp"

<StartGameButton>
    text: self.get_text(app.language)
    size_hint: 1, 0.4
    on_release: app.start_game()

<ContinueGameButton>
    disabled: False if app.check_if_saved_game else True
    text: self.get_text(app.language)
    size_hint: 1, 0.4
    on_release:
        app.load_game()

<CopyrightLabel>
    font_name: "Vollkorn"
    font_size: "15sp"
    text: "(c) AppsBrivalles 2025"
    size_hint: 1, 0.2

<LanguageMenu>
    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            orientation: "vertical"
            padding: "0dp", "75dp","0dp","0dp"
            Label:
                font_name: "Vollkorn"
                font_size: "40sp"
                text: "Select language"
        BaseButtonLayout:
            MenuButton:
                text: "English"
                on_release:
                    app.language = "english"
                    app.setup_game("languages/Fog.json")
                    app.play_soundtrack("opening.mp3", loop=False)
                    app.show_start_menu()
            MenuButton:
                text: "Espa√±ol"
                on_release:
                    app.language = "spanish"
                    app.setup_game("languages/Niebla.json")
                    app.play_soundtrack("opening.mp3", loop=False)
                    app.show_start_menu()
