#:import StartGameButton widgets.StartGameButton
#:import ContinueGameButton widgets.ContinueGameButton
#:import StartMenuButton widgets.StartMenuButton


<BaseButtonLayout>:
    orientation: "vertical"
    spacing: "10dp"  # space between widgets
    padding: "0dp", "0dp","0dp","55dp"

<BaseButton>:
    adapt_to_text_height: True
    font_name: "CreteRound"
    font_size: "20sp"
    padding: "25dp", "17dp", "25dp", "17dp"
    background_color: 1, 1, 1, 0.25
    size_hint: 1, None
    height: self.texture_size[1] if self.adapt_to_text_height else self.height
    text_size: self.width, None  # needed to align the text in Buttons. No y_hint to make it adapt to te text
    valign: "middle"
    halign: "left"

<RootLayout>
    orientation: "vertical"
    spacing: "23dp"

<TitleLayout>:
    orientation: "vertical"
    padding: "0dp", "70dp","0dp","0dp"

<StartMenuButtonLayout>:
    padding: "0dp", "120dp","0dp","30dp"

<TitleLabel>:  # displays the title of the game
    font_name: "Chiller"
    halign: "center"
    font_size: "150sp"
    text: app.title

<LocationLabel>
    text_size: self.size
    halign: "left"
    valign: "center"
    font_name: "CreteRound"
    font_size: "25sp"

<MusicButton>
    size_hint: None, None
    size: "60dp","60dp"
    background_color: 1, 1, 1, 0.20
    Image:
        source: "musicbutton.png"
        size: root.size
        center_x: root.center_x
        center_y: root.center_y

<InterfaceLayout>
    size_hint_y: 0.20
    padding: "25dp", "40dp","25dp","15dp"
    canvas:
        Color:
            rgba: 1, 1, 1, 0.5
        Line:
            points: self.x, self.y, self.right, self.y  # whole layout width
            width: 1.25
    LocationLabel:
    MusicButton:
        state: "down"
        on_state: app.soundtrack.play() if self.state == "down" else app.soundtrack.stop()

<ScreenLayout>:  # main layout of the screen. Contains TextLayout and ButtonLayout and it is embedded in the ScrollView
    orientation: "vertical"
    size_hint: 1, None
    height: self.minimum_height

<GameTextImageLayout>:  # layout for organizing text and images (GameTextLabel and ImageLayout)
    orientation: "vertical"
    padding: "25dp", "45dp","25dp","40dp"
    size_hint: 1, None
    height: self.minimum_height

<GameButtonLayout>:  # layout for organizing in-game buttons (GameButton)
    size_hint: 1, None
    height: self.minimum_height

<ImageLayout>:  # layout for organizing individual in-game pictures
    padding: "0dp", "0dp","0dp","25dp"
    size_hint: 1, None
    height: self.minimum_height

<GameTextLabel>:  # displays in-game text
    font_name: "Vollkorn"
    font_size: "21sp"
    markup: True
    size_hint: 1, None
    text_size: self.width, None
    height: self.texture_size[1]

<GameImage>:  # displays in-game pictures
    halign: "center"
    size_hint: 1, None
    size: self.texture_size

<MenuButton>:
    adapt_to_text_height: False  # allows overwriting height: self.texture_size[1] of BaseButton
    font_size: "27sp"
    size_hint_y: None
    halign: "center"
    height: "60dp"

<StartMenuButton>:
    adapt_to_text_height: True
    font_size: "20sp"

<StartMenuLayout>:
    padding: "0dp", "0dp","0dp","5dp"

<StartGameButton>
    text: self.get_text(app.language)
    size_hint: 1, 0.25
    on_release: app.start_game()

<ContinueGameButton>
    disabled: False if app.check_if_saved_game else True
    text: self.get_text(app.language)
    size_hint: 1, 0.25
    on_release: app.load_game()

<AboutTheGameButton>
    text: self.get_text(app.language)
    size_hint: 1, 0.25
    on_release: app.show_about_the_game_screen()

<LanguageMenu>
    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            orientation: "vertical"
            padding: "0dp", "75dp","0dp","0dp"
            Label:
                font_name: "Vollkorn"
                font_size: "40sp"
                text: "Select language"
        BaseButtonLayout:
            MenuButton:
                text: "English"
                on_release:
                    app.language = "english"
                    app.setup_game("languages/Fog.json")
                    app.play_soundtrack("opening.mp3", loop=False)
                    app.show_start_menu()
            MenuButton:
                text: "Espa√±ol"
                on_release:
                    app.language = "spanish"
                    app.setup_game("languages/Niebla.json")
                    app.play_soundtrack("opening.mp3", loop=False)
                    app.show_start_menu()

<AboutTheGameScreen>:
    ScrollView:
        BoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: self.minimum_height
            spacing: "80dp"
            Label:
                padding: "15dp", "50dp","15dp","0dp"
                font_name: "Vollkorn"
                font_size: "23 sp"
                halign: "center"
                text_size: self.width, None
                height: self.texture_size[1]
                text:
                    "Fog - The White Darkness\n\nWritten and programmed by Pol Alonso Pernas\n\n" \
                    "All music is free to use and downloaded from pixabay.com\n\n" \
                    "Please drop a review in the Play Store!\n\n\n(c)AppsBrivalles 2025"
                size_hint_y: None
            MenuButton:
                font_size: "22 sp"
                text: "Main menu"
                height: "60dp"
                on_release: app.show_start_menu()
